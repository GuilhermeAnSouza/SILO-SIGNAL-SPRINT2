<!DOCTYPE html>
<html lang="pt-br">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Silo Tech | Menu</title>
    <link rel="stylesheet" href="dashboard.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>

<body>
    <div class="menu-lateral">
        <span class="menu-titulo">SiloTech | Menu</span>
        <div id="menu-opcoes">
            <button onclick="mostrarGeral()">Visão Geral</button>
            <button onclick="mostrarIndividual()">Silos Individuais</button>
            <button onclick="mostrarConfig()">Configurações</button>
        </div>

        <a href="../Site institucional/homepage.html"><img src="" alt="sair"></a>
    </div>
    <div id="container">

        <span id="container-titulo">Bem-vindo(a) usuário!</span>
        <br>
        <span id="subTitulo"></span>

        <div id="visaoGeral">

            <div id="container-kpiGeral">
                <div class="kpi1">
                    <p>STATUS ATUAL</p>
                    <p>SILO 1</p>
                    <div class="porcentagem-silo">
                        <div id="statusSilo1"></div>
                        <span id="silo1_porcentagem">1.56%</span> <!--esse dado precisa ser dinamico-->
                    </div>
                </div>

                <div class="kpi2">
                    <p>STATUS ATUAL</p>
                    <p>SILO 2</p>
                    <div class="porcentagem-silo">
                        <div id="statusSilo2"></div>
                        <span id="silo2_porcentagem">2.89%</span> <!--esse dado precisa ser dinamico-->
                    </div>
                </div>

                <div class="kpi-bandeira">
                    <h3>Bandeiras, Porcentagens e Classificações</h3>
                    <div class="legenda-status">
                        <div id="status-ok"></div><span>verde até 4%</span>
                    </div>
                    <div class="legenda-status">
                        <div id="status-atencao"></div><span>amarelo de 5% a 9%</span>
                    </div>
                    <div class="legenda-status">
                        <div id="status-emergencia"></div><span> vermelho de 10% a 15%</span>
                    </div>
                </div>
            </div>


            <div class="grafico-geral">
                <canvas id="myChart"></canvas>
            </div>

        </div>

        <div id="visaoIndividual">
            <select id="select_silo" oninput="selecionarSilo()">
                <option value="#">Selecione um Silo</option>
                <option value="silo1">SILO 1</option>
                <option value="silo2">SILO 2</option>
            </select>
            <div id="divMensagem"></div>


        </div>



        <div id="visaoConfig">
            aqui sera as configurações
        </div>
    </div>
</body>

</html>

<script>

    //funcoes para aparecer e desaparecer cada div
    function mostrarGeral() {
        document.getElementById('visaoGeral').style.display = 'flex';
        document.getElementById('visaoIndividual').style.display = 'none';
        document.getElementById('visaoConfig').style.display = 'none';
        subTitulo.innerHTML = `DashBoard Geral`;
    }
    function mostrarIndividual() {
        document.getElementById('visaoGeral').style.display = 'none'
        document.getElementById('visaoIndividual').style.display = 'flex'
        document.getElementById('visaoConfig').style.display = 'none'
        subTitulo.innerHTML = `DashBoard Individual`;
    }
    function mostrarConfig() {
        document.getElementById('visaoGeral').style.display = 'none'
        document.getElementById('visaoIndividual').style.display = 'none'
        document.getElementById('visaoConfig').style.display = 'flex'
        subTitulo.innerHTML = `Configurações`;
    }

    function selecionarSilo(){
        var siloSelecionado = select_silo.value;
        if (siloSelecionado == '#'){
            divMensagem.innerHTML = ``
        } else if (siloSelecionado == 'silo1') {
            divMensagem.innerHTML = 'silo 1 selecionado com sucesso'
        } else if (siloSelecionado == 'silo2') {
            divMensagem.innerHTML = 'silo 2 selecionado com sucesso'
    
        }
    }
    //grafico de linha geral

    const ctx = document.getElementById('myChart');

    new Chart(ctx, {
        type: 'line',
        data: {
            //aqui devem ir os periodos de tempo (30min em 30min)

            labels: ['10:30', '11:00', '11:30', '12:00', '12:30'],

            datasets: [{
                label: 'Silo 1',
                //valores que devem vir do sensor
                data: [0.12, 0.19, 0.37, 0.55, 1.27],
                borderWidth: 1
            },
            {
                label: 'Silo 2',
                //valores que devem vir do sensor
                data: [0.23, 0.25, 0.39, 1.20, 1.39],
                borderWidth: 1,
            }]
        },
        options: {
        plugins: {
            legend: {
                display: true,
                position: 'top',
                labels: {
                    color: 'rgb(255, 255, 255)',
                    font: {
                        size: 16,
                        weight: 'bold'
                    },
                    boxWidth: 20,
                    padding: 15
                }
            }
        },
        scales: {
            y: {
                beginAtZero: true,
                grid: {
                    drawOnChartArea: false 
                },
                ticks: {
                    font: {
                        size: 16 
                    },
                    color: 'rgb(255, 255, 255)' 
                }
            },
            x: {
                grid: {
                    drawOnChartArea: false 
                },
                ticks: {
                    font: {
                        size: 16
                    },
                    color: 'rgb(255, 255, 255)'
                }
            }
        }
    }
});

</script>